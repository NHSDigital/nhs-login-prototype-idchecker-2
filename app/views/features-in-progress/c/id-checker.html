{% extends 'layout.html' %}


{% set service = "idchecker" %}
{% set signedin = 'true' %}
{% set params = "?demographics=" + demographics + "&role=" + role + "&result=" + result + "&failreason=" + failreason + "&devMode=" + devMode + "&automation=" + automation  %}
{% set dataResult = 'data-result=' + result %}

{% block extrastyles %}
<script src='/panzoom.min.js'></script>
{% endblock %}

{% block content %}

<style>
    .container {
        display: flex;
        position: relative;
        padding-left: 32px;
    }
    .column {
        flex: 1;
        margin-top: 32px;
        margin-right: 24px;
    }
    .container::before {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        left: 50%;
        width: 4px;
        background: #d8dde0; /* Border color */
        transform: translateX(-50%);
    }
    .section {
        margin-bottom: 32px;
        border-left: 4px solid #d8dde0;
    }
</style>

<div class="nhsuk-care-card">

    <!-- -----------------------------JOURNEY TAGS------------------------------------------------------------
         -----------------------------JOURNEY TAGS------------------------------------------------------------
         -----------------------------JOURNEY TAGS------------------------------------------------------------
    -->

    <div class="sticky" >
        <!-- is this automated? check for an absence of video file --> 
        {% if data.idv[data.prototype.count].media_video === '' %}
        <div class="id-check_automated" >Automated journey</div>
        {% else %}
        <div class="id-check_uplift">Manual journey</div>
        {% endif %}
    </div>
    

<!--

$$$$$$$\  $$\   $$\  $$$$$$\ $$$$$$$$\  $$$$$$\         $$$$$$\  $$\   $$\ $$$$$$$$\  $$$$$$\  $$\   $$\
$$  __$$\ $$ |  $$ |$$  __$$\\__$$  __|$$  __$$\       $$  __$$\ $$ |  $$ |$$  _____|$$  __$$\ $$ | $$  |
$$ |  $$ |$$ |  $$ |$$ /  $$ |  $$ |   $$ /  $$ |      $$ /  \__|$$ |  $$ |$$ |      $$ /  \__|$$ |$$  /
$$$$$$$  |$$$$$$$$ |$$ |  $$ |  $$ |   $$ |  $$ |      $$ |      $$$$$$$$ |$$$$$\    $$ |      $$$$$  /
$$  ____/ $$  __$$ |$$ |  $$ |  $$ |   $$ |  $$ |      $$ |      $$  __$$ |$$  __|   $$ |      $$  $$<
$$ |      $$ |  $$ |$$ |  $$ |  $$ |   $$ |  $$ |      $$ |  $$\ $$ |  $$ |$$ |      $$ |  $$\ $$ |\$$\
$$ |      $$ |  $$ | $$$$$$  |  $$ |    $$$$$$  |      \$$$$$$  |$$ |  $$ |$$$$$$$$\ \$$$$$$  |$$ | \$$\
\__|      \__|  \__| \______/   \__|    \______/        \______/ \__|  \__|\________| \______/ \__|  \__|

-->



    <div class="nhsuk-care-card__content section">

        <div class="nhsuk-grid-row container">
            <div class="nhsuk-grid-column-one-half column">
            <h3>Photo ID</h3>
                <p class="nhsuk-body-s idcheck-help">To zoom in either double click on the picture, or position your cursor on the image, then hold 'Alt' + scroll with your mouse wheel. <a href="#" id="reset">Reset</a></p>
                <div class="reading-width panzoom-parent idcheck-image-container">

                    <div class="idcheck-image-expand"><a href="#" class="idcheck-image-expand-button">Expand image</a></div>

                    <div class="idcheck-image zoomable1">
                        <img src="/images/media/photos/DL-front.jpg" class="idcheck-image-img" style="width: 100%;"
                             alt="Picture of identity document"/>
                    </div>

                    {% if data.idv[data.prototype.count].media_photoid_back !== '' %}

                    <div class="reading-width idcheck-image-container">
                        <div class="idcheck-image-expand"><a href="#" class="idcheck-image-expand-button">Expand image</a></div>
                        <div class="idcheck-image zoomable2">
                            <img src="/images/media/photos/{{ data.idv[data.prototype.count].media_photoid_back}}" class="idcheck-image-img" style="width: 100%;" alt="Image of a driving licence"/>
                        </div>
                    </div>

                    {% endif %}

                </div>
            </div>
            <div class="nhsuk-grid-column-one-half column">
                <div class="qa-questions-group" data-complete="false">

                    <div class="qa-questions-question" id="document-1" data-answered="false" data-group="decline-1">

                        <fieldset class="nhsuk-fieldset">

   
                                <legend class="nhsuk-fieldset__legend">
                                    <p class="qa-questions-question-text">
                                        Can you see everything you need to do your identity checks?
                                    </p>
                                </legend>

                            <div class="qa-questions-answer-group multiple-choice__container" data-answered="false">

                                <div class="nhsuk-radios nhsuk-radios--inline">

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="0" name="a-1" type="radio" value="yes" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="0">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer " id="1" name="a-1" type="radio" value="yes" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="1">
                                            No
                                        </label>
                                    </div>

                                </div>

                            </div>

                        </fieldset>
                    </div>



                </div>

                <div class="qa-questions-group" data-complete="false">

                    <div class="qa-questions-question" id="document-2" data-answered="false" data-group="decline-2">


                        <fieldset class="nhsuk-fieldset nhsuk-u-margin-top-6">

                                <legend class="nhsuk-fieldset__legend">
                                    <p class="qa-questions-question-text">
                                        Does the photo ID look genuine?
                                    </p>
                                </legend>

                            <div class="qa-questions-answer-group multiple-choice__container" data-answered="false">

                                <div class="nhsuk-radios nhsuk-radios--inline">

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="2" name="a-2" type="radio" value="yes" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="2">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="3" name="a-2" type="radio" value="no" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="3">
                                            No
                                        </label>
                                    </div>

                                </div>

                            </div>

                        </fieldset>

                    </div>
                </div>

                <div class="qa-questions-group" data-complete="false">

                    <div class="qa-questions-question" id="document-3" data-answered="false" data-group="decline-3">


                        <fieldset class="nhsuk-fieldset nhsuk-u-margin-top-6">
                                <legend class="nhsuk-fieldset__legend">
                                    <p class="qa-questions-question-text">
                                        Is the photo ID valid?
                                    </p>
                                </legend>

                            <div class="qa-questions-answer-group multiple-choice__container" data-answered="false">

                                <div class="nhsuk-radios nhsuk-radios--inline">

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="4" name="a-3" type="radio" value="yes" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="4">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="5" name="a-3" type="radio" value="no" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="5">
                                            No
                                        </label>
                                    </div>

                                </div>

                            </div>

                        </fieldset>

                    </div>

                </div>

            </div>
        </div>
    </div>



<!--

$$$$$$$\  $$$$$$$\   $$$$$$\        $$$$$$$$\ $$$$$$$\   $$$$$$\   $$$$$$\  $$$$$$$$\
$$  __$$\ $$  __$$\ $$  __$$\       \__$$  __|$$  __$$\ $$  __$$\ $$  __$$\ $$  _____|
$$ |  $$ |$$ |  $$ |$$ /  \__|         $$ |   $$ |  $$ |$$ /  $$ |$$ /  \__|$$ |
$$$$$$$  |$$ |  $$ |\$$$$$$\           $$ |   $$$$$$$  |$$$$$$$$ |$$ |      $$$$$\
$$  ____/ $$ |  $$ | \____$$\          $$ |   $$  __$$< $$  __$$ |$$ |      $$  __|
$$ |      $$ |  $$ |$$\   $$ |         $$ |   $$ |  $$ |$$ |  $$ |$$ |  $$\ $$ |
$$ |      $$$$$$$  |\$$$$$$  |         $$ |   $$ |  $$ |$$ |  $$ |\$$$$$$  |$$$$$$$$\
\__|      \_______/  \______/          \__|   \__|  \__|\__|  \__| \______/ \________|

-->


    <div class="nhsuk-care-card__content section">

        <div class="nhsuk-grid-row container">
            <div class="nhsuk-grid-column-one-half column">

<!-- ------------------   Post Code  ---------------------------
-----------------------   Post Code  ---------------------------
-----------------------   Post Code  ---------------------------
-->
                <div class="nhsuk-form-group" >
                        <h3>Postcode</h3>
                        <p style="background-color: #fff9c4; padding: 16px 24px 16px 24px; font-size: 20px; font-weight: bold; width: fit-content;">{{ data.idv[data.prototype.count].postcode}}</p>
                </div>

<!-- ------------------   User information  ---------------------------
-----------------------   User submitted information  ---------------------------
-----------------------   User submitted information  ---------------------------
-->
                {% if data.idv[data.prototype.count].pds_match === 'true' %}
                {% else %}
                <details class="nhsuk-details nhsuk-expander nhsuk-u-margin-top-7">
                    <summary class="nhsuk-details__summary">
                      <span class="nhsuk-details__summary-text">
                      Show user information
                      </span>
                    </summary>

                    <div class="nhsuk-details__text">
                        <h3>User information</h3>

                        
                        {% if data.idv[data.prototype.count].nhs_number !== '' %}

                        <div class="nhsuk-form-group">
                            <label class="nhsuk-label" for="nhsnum">
                                NHS Number
                            </label>
                            <input class="nhsuk-input nhsuk-input--width-10" id="nhsnum" value="{{ data.idv[data.prototype.count].nhs_number}}" name="nhsnum" type="text" maxlength="10" readonly>
                        </div>

                        {% else %}
                        <div class="nhsuk-form-group">
                            <label class="nhsuk-label" for="firstname">
                                First name
                            </label>
                            <input class="nhsuk-input nhsuk-input--width-20" id="firstname" value="{{ data.idv[data.prototype.count].name_first}}" name="firstname" type="text" maxlength="" readonly >
                        </div>                      
                        <div class="nhsuk-form-group">
                            <label class="nhsuk-label" for="middlename">
                                Middle names
                            </label>
                            <input class="nhsuk-input nhsuk-input--width-20" id="middlename" value="{{ data.idv[data.prototype.count].name_middle}}" name="middlename" type="text" maxlength="" readonly >
                        </div>
                        <div class="nhsuk-form-group">
                            <label class="nhsuk-label" for="lastname">
                                Last name
                            </label>
                            <input class="nhsuk-input nhsuk-input--width-20" id="lastname" value="{{ data.idv[data.prototype.count].name_last}}" name="lastname" type="text" maxlength="" readonly >
                        </div>
                        {% endif %}

                        <div class="nhsuk-form-group">
                            <fieldset class="nhsuk-fieldset" aria-describedby="example-hint" role="group">
                                <legend class="nhsuk-fieldset__legend">
                                    <h3 class="nhsuk-fieldset__legend">
                                        Date of birth
                                    </h3>
                                </legend>
                                <div class="nhsuk-date-input" id="example">
                                    <div class="nhsuk-date-input__item">
                                        <div class="nhsuk-form-group">
                                            <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="example-day" name="example-day" type="number" value="{{ data.idv[data.prototype.count].date_day}}" readonly>
                                        </div>
                                    </div>
                                    <div class="nhsuk-date-input__item">
                                        <div class="nhsuk-form-group">
                                            <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="example-month" name="example-month" type="number" value="{{ data.idv[data.prototype.count].date_month}}" readonly>
                                        </div>
                                    </div>
                                    <div class="nhsuk-date-input__item">
                                        <div class="nhsuk-form-group">
                                            <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" id="example-year" name="example-year" type="number" value="{{ data.idv[data.prototype.count].date_year}}" readonly>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        
                        <div class="nhsuk-form-group">
                            <label class="nhsuk-label" for="postcode">
                                Postcode
                            </label>
                            <input class="nhsuk-input nhsuk-input--width-5" id="postcode" value="{{ data.idv[data.prototype.count].postcode}}" name="postcode" type="text" maxlength="" readonly >
                        </div>
                    </div>
                </details>
                {% endif %}
            </div>

<!-- ------------------   PDS Trace Right column  ---------------------------
-----------------------   PDS Trace Right column  ---------------------------
-----------------------   PDS Trace Right column  ---------------------------
-->
            <div class="nhsuk-grid-column-one-half column">
                <h3>PDS trace result</h3>

                <div class="bar_container" id="loader">
                    <div id="main_container">
                        <div id="pbar" class="progress-spinner" data-percent="0">
                            <img src="/images/loader-spinner.svg" width="200px" height="200px" id="spinner"/>
                            <div class="ppc-loading">
                                <div class="pcc-percents-wrapper">
                                    <span id="spinner-status">Please wait</span><span aria-hidden="true">...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- PDS RESULT -->


                <div id="trace" class="idcheck-match {% if data['pds_match'] !== 'true' %}  fail{% endif %}" style="display:none;">

                    <div class="idcheck-result">
                        
                        {% if data['pds_match'] === 'true' %} 
                            Single record found
                        {% else %}
                            {% if data.idv[data.prototype.count].pds_failreason === 'expired' %}
                                Match not possible
                            {% elif data.idv[data.prototype.count].pds_failreason === 'invalid' %}
                                System error - SMSP-0001
                            {% elif data.idv[data.prototype.count].pds_failreason === 'validation' %}
                                System error - SMSP-0002
                            {% elif data.idv[data.prototype.count].pds_failreason === 'unavailable' %}
                                System error - SMSP-0003
                            {% else %}
                                Match not found
                            {% endif %}
                        {% endif %}
                    </div>



                    {% if data.idv[data.prototype.count].pds_matches === 'false' %}

                        {% if data.idv[data.prototype.count].pds_failreason === 'multiple' %}
                        <div class="idcheck-result-reason" id="failed">
                            <p>Multiple results were returned</p>
                        </div>
                        {% elif data.idv[data.prototype.count].pds_failreason === 'invalid' %}
                        <div class="idcheck-result-reason" id="failed">
                            <!--<p>The submitted NHS number is invalid</p>-->
                        </div>
                        {% elif data.idv[data.prototype.count].pds_failreason === 'expired' %}
                        <div class="idcheck-result-reason" id="failed">
                            <p>The record for this NHS number contains a date of death.</p>
                        </div>
                        {% else %}
                        <div class="idcheck-result-reason" id="failed">
                            <!--<p>Either the NHS number is invalid or it does not match to the date of birth submitted.</p>-->
                        </div>
                        {% endif %}

                    {% endif %}


                    {% if data.idv[data.prototype.count].pds_matches === 'spine' %}

                        {% if data.idv[data.prototype.count].pds_failreason === 'invalid' %}
                        <div class="idcheck-result-reason" id="failed">
                            <p>Please contact your supervisor.</p>
                        </div>

                        {% elif data.idv[data.prototype.count].pds_failreason === 'validation' %}
                        <div class="idcheck-result-reason" id="failed">
                            <p>Please contact your supervisor.</p>
                        </div>

                        {% elif data.idv[data.prototype.count].pds_failreason === 'unavailable' %}
                        <div class="idcheck-result-reason" id="failed">
                            <p>We are having technical problems.</p>
                            <p>Please abort and try again later.</p>
                        </div>

                        {% else %}
                        <div class="idcheck-result-reason" id="failed">
                            <p>We are having technical problems.</p>
                            <p>Please abort and try again later.</p>
                        </div>
                        {% endif %}

                    {% endif %}

                </div> 

                <div id="retrace" class="idcheck-match" style="display:none;">
                    <div class="idcheck-result">
                            Single record found
                    </div>
                </div>

                {% if data.idv[data.prototype.count].pds_matches === 'false' %}

                <div class="form-group nhsuk-u-margin-top-4" id="declinebtn-2" style="display: none;">

                    {% if data.idv[data.prototype.count].pds_failreason === 'expired' %}

                    <div id="id-decline3">
                        <a href="dashboard" data-target="modal" id="declineBtn3" class="button button--decline">Decline</a>
                    </div>

                    {% else %}

                    <div class="qa-questions-group" data-complete="false" style=" {% if data['pds_match'] === 'true' %} display:none; {% else %} display:block; {% endif %}">
                        <div class="qa-questions-question" id="trace-1" data-answered="false" data-group="decline-4a">

                            <fieldset class="nhsuk-fieldset nhsuk-u-margin-top-4">

                                    <legend class="nhsuk-fieldset__legend">
                                        <p class="qa-questions-question-text">
                                            Can you find a single, matching PDS record?
                                        </p>
                                    </legend>

                                <div class="qa-questions-answer-group multiple-choice__container" data-answered="false">

                                    <div class="nhsuk-radios nhsuk-radios--inline">

                                        <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                            <input class="nhsuk-radios__input qa-questions-answer" id="6" name="a-4a" type="radio" value="yes" aria-checked="false" aria-controls="nhs-yes">
                                            <label class="nhsuk-label nhsuk-radios__label" for="6">
                                                Yes
                                            </label>
                                        </div>

                                        <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3" data-target="" >
                                            <input class="nhsuk-radios__input qa-questions-answer" id="7" name="a-4a" type="radio" value="no" aria-checked="false" aria-controls="nhs-no">
                                            <label class="nhsuk-label nhsuk-radios__label" for="7">
                                                No
                                            </label>
                                        </div>

                                    </div>

                                </div>

                            </fieldset>

                        </div>

                    </div>


                    <div aria-hidden="true" aria-expanded="false" class="js-hidden nhsuk-u-margin-top-3" id="nhs-yes" data-group="decline-4a">

                        <div class="nhsuk-form-group">
                            <label class="nhsuk-label" for="nhs_number">
                                NHS number
                            </label>
                            <input class="nhsuk-input nhsuk-input--width-10" id="nhs_number" value="" name="nhs_number" type="text" maxlength="" >
                        </div>

{#                         <div class="nhsuk-form-group">
                            <label class="nhsuk-label" for="postcode">
                                Current postcode (from PDS)
                            </label>
                            <input class="nhsuk-input nhsuk-input--width-5" id="postcode" value="" name="postcode" type="text" maxlength="" >
                        </div> #}

                        <div id="id-approve2">
                            <button id="retraceBtn" data-target="" class="nhsuk-button button--retry">Re-run trace</button>
                        </div>
                    </div>

                    <div aria-hidden="true" aria-expanded="false" class="js-hidden nhsuk-u-margin-top-3" id="nhs-no" data-group="decline-0">
                        <div id="id-decline2">
                            <a href="dashboard" id="declineBtn2" data-target="modal" class="nhsuk-button button--decline">Decline</a>
                        </div>
                    </div>

                {% endif %}

                </div>

                {% endif %}

                {% if data.idv[data.prototype.count].pds_matches === 'spine' %}
                <div id="retrybtn-1" style="display:none;">
                    <div id="id-retry">
                        <a href="id-checker"
                           id="retryBtn" class="button button--retry">Retry</a>
                    </div>
                </div>
                {% endif %}

            </div>
        </div>
    </div>


<!--

$$$$$$$\  $$$$$$$\   $$$$$$\         $$$$$$\  $$\   $$\ $$$$$$$$\  $$$$$$\  $$\   $$\
$$  __$$\ $$  __$$\ $$  __$$\       $$  __$$\ $$ |  $$ |$$  _____|$$  __$$\ $$ | $$  |
$$ |  $$ |$$ |  $$ |$$ /  \__|      $$ /  \__|$$ |  $$ |$$ |      $$ /  \__|$$ |$$  /
$$$$$$$  |$$ |  $$ |\$$$$$$\        $$ |      $$$$$$$$ |$$$$$\    $$ |      $$$$$  /
$$  ____/ $$ |  $$ | \____$$\       $$ |      $$  __$$ |$$  __|   $$ |      $$  $$<
$$ |      $$ |  $$ |$$\   $$ |      $$ |  $$\ $$ |  $$ |$$ |      $$ |  $$\ $$ |\$$\
$$ |      $$$$$$$  |\$$$$$$  |      \$$$$$$  |$$ |  $$ |$$$$$$$$\ \$$$$$$  |$$ | \$$\
\__|      \_______/  \______/        \______/ \__|  \__|\________| \______/ \__|  \__|

-->


    <div class="nhsuk-care-card__content section">

        <div class="nhsuk-grid-row container">
            <div class="nhsuk-grid-column-one-half column">

                <h3>Compare the photo ID and the PDS record</h3>

                <div class="reading-width idcheck-image-container">
                    <div class="idcheck-image zoomable3">

                        <img src="/images/media/photos/DL-front.jpg" class="idcheck-image-img" style="width: 100%;"
                             alt="Picture of a identity document"/>

                    </div>

                </div>

            </div>
            <div class="nhsuk-grid-column-one-half column">
                <h3>PDS record</h3>

                <div class="idcheck-match">

                    <table id="pds-result">
                        <tr>
                            <td>First name:</td>
                            <td><b>{% if data.idv[data.prototype.count].pds_matches === 'true' %}Joe{% else %}-{% endif %}</b></td>
                        </tr>
                        <tr>
                            <td>Middle name:</td>
                            <td><b>{% if data.idv[data.prototype.count].pds_matches === 'true' %}William{% else %}-{% endif %}</b></td>
                        </tr>
                        <tr>
                            <td>Last name:</td>
                            <td><b>{% if data.idv[data.prototype.count].pds_matches === 'true' %}Boggs{% else %}-{% endif %}</b></td>
                        </tr>
                        <tr>
                            <td>Date of birth:</td>
                            <td><b>{% if data.idv[data.prototype.count].pds_matches === 'true' %}26th September, 1991{% else %}-{% endif %}</b></td>
                        </tr>
                    </table>

                    <!-- {# results shown after a re-trace #} -->
                    <table id="pds-retrace-result" style="display: none;">
                        <tr>
                            <td>First name:</td>
                            <td><b>Joe</b></td>
                        </tr>
                        <tr>
                            <td>Middle name:</td>
                            <td><b>William</b></td>
                        </tr>
                        <tr>
                            <td>Last name:</td>
                            <td><b>Boggs</b></td>
                        </tr>
                        <tr>
                            <td>Date of birth:</td>
                            <td><b>26th September, 1991</b></td>
                        </tr>
                    </table>

                </div>


                <div class="qa-questions-group" data-complete="false">

                    <div class="qa-questions-question" id="pds-1" data-answered="false" data-group="decline-4a">

                        <fieldset class="nhsuk-fieldset nhsuk-u-margin-top-6">

                                <legend class="nhsuk-fieldset__legend">
                                    <p class="qa-questions-question-text">
                                        Do the dates of birth match?
                                    </p>
                                </legend>

                            <div class="qa-questions-answer-group multiple-choice__container" data-answered="false">

                                <div class="nhsuk-radios nhsuk-radios--inline">

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="8" name="a-4" type="radio" value="yes" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="8">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="9" name="a-4" type="radio" value="yes" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="9">
                                            No
                                        </label>
                                    </div>

                                </div>

                            </div>

                        </fieldset>

                    </div>

                </div>


                <div class="qa-questions-group" data-complete="false">

                    <div class="qa-questions-question" id="pds-2" data-answered="false" data-group="decline-4b">

                        <fieldset class="nhsuk-fieldset nhsuk-u-margin-top-6">

                                <legend class="nhsuk-fieldset__legend">
                                    <p class="qa-questions-question-text">
                                        Do the first names match?
                                    </p>
                                </legend>


                            <div class="qa-questions-answer-group multiple-choice__container" data-answered="false">

                                <div class="nhsuk-radios nhsuk-radios--inline">

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="10" name="a-5" type="radio" value="yes" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="10">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="11" name="a-5" type="radio" value="yes" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="11">
                                            No
                                        </label>
                                    </div>

                                </div>

                            </div>

                        </fieldset>

                    </div>

                    <div class="callout callout--info" style="display: none" id="manual-pds-1">

                        <div class="nhsuk-form-group nhsuk-u-margin-bottom-0">

                            <fieldset class="nhsuk-fieldset nhsuk-u-margin-top-0">

                                <p style="">Use DSA to check the PDS record. Do any historic first names match the first name on the photo ID?</p>

                                <div class="nhsuk-radios nhsuk-radios--inline">
                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="radio-inline-3" name="radio-inline-group-1" type="radio" value="yes" aria-checked="false" aria-controls="pds-yes-1">
                                        <label class="nhsuk-label nhsuk-radios__label" for="radio-inline-3">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3" data-target="" data-group="decline-4b">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="radio-inline-4" name="radio-inline-group-1" type="radio" value="no" aria-checked="false" aria-controls="pds-no-1">
                                        <label class="nhsuk-label nhsuk-radios__label" for="radio-inline-4">
                                            No
                                        </label>
                                    </div>
                                </div>
                            </fieldset>

                        </div>

                        <div aria-hidden="true" aria-expanded="false" class="js-hidden nhsuk-u-margin-top-3" id="pds-no-1" data-group="decline-4b">
                            <div id="id-decline2">
                                <a href="dashboard" id="declineBtn2" data-target="modal" class="nhsuk-button button--modal button--decline nhsuk-u-margin-bottom-0">Decline</a>
                            </div>
                        </div>

                    </div>

                </div>

                <div class="qa-questions-group" data-complete="false">


                    <div class="qa-questions-question" id="pds-3" data-answered="false" data-group="decline-4c">

                        <fieldset class="nhsuk-fieldset nhsuk-u-margin-top-6">

                                <legend class="nhsuk-fieldset__legend">
                                    <p class="qa-questions-question-text">
                                        Do the last names match?
                                    </p>
                                </legend>


                            <div class="qa-questions-answer-group multiple-choice__container" data-answered="false">

                                <div class="nhsuk-radios nhsuk-radios--inline">

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="12" name="a-6" type="radio" value="yes" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="12">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="13" name="a-6" type="radio" value="yes" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="13">
                                            No
                                        </label>
                                    </div>

                                </div>

                            </div>

                        </fieldset>

                    </div>

                    <div class="callout callout--info" style="display: none" id="manual-pds-2">

                        <div class="nhsuk-form-group nhsuk-u-margin-bottom-0">

                            <fieldset class="nhsuk-fieldset nhsuk-u-margin-top-0">

                                <p style="">Use DSA to check the PDS record. Do any historic last names match the last name on their photo ID?</p>

                                <div class="nhsuk-radios nhsuk-radios--inline">
                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="radio-inline-5" name="radio-inline-group-2" type="radio" value="yes" aria-checked="false" aria-controls="pds-yes-2">
                                        <label class="nhsuk-label nhsuk-radios__label" for="radio-inline-5">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3" data-target="" data-group="decline-4c">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="radio-inline-6" name="radio-inline-group-2" type="radio" value="no" aria-checked="false" aria-controls="pds-no-2">
                                        <label class="nhsuk-label nhsuk-radios__label" for="radio-inline-6">
                                            No
                                        </label>
                                    </div>
                                </div>
                            </fieldset>

                        </div>

                        <div aria-hidden="true" aria-expanded="false" class="js-hidden nhsuk-u-margin-top-3" id="pds-no-2" data-group="decline-4c">
                            <div id="id-decline2">
                                <a href="dashboard" id="declineBtn2" data-target="modal" class="nhsuk-button button--modal button--decline nhsuk-u-margin-bottom-0">Decline</a>
                            </div>
                        </div>




                    </div>  

                </div>

            </div>
        </div>
    </div>

<!--

$$\       $$$$$$\ $$\   $$\ $$$$$$$$\ $$\   $$\ $$$$$$$$\  $$$$$$\   $$$$$$\              $$\       $$\       $$$$$$\ $$\    $$\ $$$$$$$$\ $$\   $$\ $$$$$$$$\  $$$$$$\   $$$$$$\
$$ |      \_$$  _|$$ | $$  |$$  _____|$$$\  $$ |$$  _____|$$  __$$\ $$  __$$\            $$  |      $$ |      \_$$  _|$$ |   $$ |$$  _____|$$$\  $$ |$$  _____|$$  __$$\ $$  __$$\
$$ |        $$ |  $$ |$$  / $$ |      $$$$\ $$ |$$ |      $$ /  \__|$$ /  \__|          $$  /       $$ |        $$ |  $$ |   $$ |$$ |      $$$$\ $$ |$$ |      $$ /  \__|$$ /  \__|
$$ |        $$ |  $$$$$  /  $$$$$\    $$ $$\$$ |$$$$$\    \$$$$$$\  \$$$$$$\           $$  /        $$ |        $$ |  \$$\  $$  |$$$$$\    $$ $$\$$ |$$$$$\    \$$$$$$\  \$$$$$$\
$$ |        $$ |  $$  $$<   $$  __|   $$ \$$$$ |$$  __|    \____$$\  \____$$\         $$  /         $$ |        $$ |   \$$\$$  / $$  __|   $$ \$$$$ |$$  __|    \____$$\  \____$$\
$$ |        $$ |  $$ |\$$\  $$ |      $$ |\$$$ |$$ |      $$\   $$ |$$\   $$ |       $$  /          $$ |        $$ |    \$$$  /  $$ |      $$ |\$$$ |$$ |      $$\   $$ |$$\   $$ |
$$$$$$$$\ $$$$$$\ $$ | \$$\ $$$$$$$$\ $$ | \$$ |$$$$$$$$\ \$$$$$$  |\$$$$$$  |      $$  /           $$$$$$$$\ $$$$$$\    \$  /   $$$$$$$$\ $$ | \$$ |$$$$$$$$\ \$$$$$$  |\$$$$$$  |
\________|\______|\__|  \__|\________|\__|  \__|\________| \______/  \______/       \__/            \________|\______|    \_/    \________|\__|  \__|\________| \______/  \______/

-->

    <div class="nhsuk-care-card__content section">

        <div class="nhsuk-grid-row container">
            <div class="nhsuk-grid-column-one-half column">

                    <h3>
                        {% if data.idv[data.prototype.count].media_video === '' %}
                        Image from face scan
                        {% else %}
                        Video selfie
                        {% endif %}
                    </h3>
                    

                    <div class="idcheck-media">
                        
                        {% if data.idv[data.prototype.count].media_video === '' %}
                        <img src="/images/media/scans/iproov-scan.png" class="idcheck-image-img" style="width: 100%; height: 100%;"
                        alt="Image of the user from iproov"/>
                        
                        {% else %}
                        <video id="uploaded-video" controls name="media" style="width:100%;height:auto;">
                            <source src="/images/media/videos/challenge.mp4" type="video/mp4">
                        </video>

                        {% endif %}
                            
                    </div>

                                
            {% if data.idv[data.prototype.count].media_video === '' %}
            {% else %}
                <div class="nhsuk-transcodedvideo-link">
                    <a class="nhsuk-transcodedvideo-link__link" href="#">
                        <img src="/images/transcodedvideo.svg" class="nhsuk-icon__arrow-right-circle">
                        <span class="nhsuk-transcodedvideo-link__text" style="font-size:14px; vertical-align:middle" id="transcodelink">Show the original video</span>
                    </a>
                </div>
            {% endif %}
            </div>
            <div class="nhsuk-grid-column-one-half column">

                <div class="qa-questions-group" data-complete="false">
                    <div class="qa-questions-question" id="selfie-0" data-answered="false" data-group="decline-5">

                        <fieldset class="nhsuk-fieldset">

                                <legend class="nhsuk-fieldset__legend">
                                    <p class="qa-questions-question-text">
                                        New Safeguarding question?
                                    </p>
                                </legend>

                            <div class="qa-questions-answer-group multiple-choice__container" data-answered="false">

                                <div class="nhsuk-radios nhsuk-radios--inline">

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="14" name="a-7" type="radio" value="yes" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="14">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="15" name="a-7" type="radio" value="no" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="15">
                                            No
                                        </label>
                                    </div>

                                </div>

                            </div>

                        </fieldset>

                    </div>
                </div>
                
                <div class="qa-questions-group" data-complete="false">
                    <div class="qa-questions-question" id="selfie-1" data-answered="false" data-group="decline-6">

                        <fieldset class="nhsuk-fieldset nhsuk-u-margin-top-6">

                                <legend class="nhsuk-fieldset__legend">
                                    <p class="qa-questions-question-text">
                                        {% if data.idv[data.prototype.count].media_video === '' %}
                                            Do the faces from the face scan and the photo ID match?
                                        {% else %}
                                            Can you clearly see the face in the video?
                                        {% endif %}
                                    </p>
                                </legend>

                            <div class="qa-questions-answer-group multiple-choice__container" {% if data.idv[data.prototype.count].media_video === '' %} data-answered="true"{% else %} data-answered="false" {% endif %}>

                                <div class="nhsuk-radios nhsuk-radios--inline">

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="16" name="a-8" type="radio" value="yes" {% if data.idv[data.prototype.count].media_video === '' %}aria-checked="true" checked="checked"{% else %} aria-checked="false" {% endif %}>
                                        <label class="nhsuk-label nhsuk-radios__label" for="16">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="17" name="a-8" type="radio" value="no" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="17">
                                            No
                                        </label>
                                    </div>

                                </div>

                            </div>

                        </fieldset>

                    </div>
                </div>

                <!-- hide this question in automation -->

                <div class="qa-questions-group {% if data.idv[data.prototype.count].media_video === '' %}js-hidden" data-complete="true"{% else %}" data-complete="true"{% endif %}>
                    <div class="qa-questions-question" id="selfie-2" {% if data.idv[data.prototype.count].media_video === '' %}data-answered="true"{% else %}data-answered="false"{% endif %} data-group="decline-7">

                        <fieldset class="nhsuk-fieldset nhsuk-u-margin-top-6">

                                <legend class="nhsuk-fieldset__legend">
                                    <p class="qa-questions-question-text">
                                            Does the face in the photo ID match the face in the video?
                                    </p>
                                </legend>

                            <div class="qa-questions-answer-group multiple-choice__container" {% if data.idv[data.prototype.count].media_video === '' %} data-answered="true"{% else %} data-answered="false" {% endif %}>

                                <div class="nhsuk-radios nhsuk-radios--inline">

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="18" name="a-9" type="radio" value="yes" {% if data.idv[data.prototype.count].media_video === '' %}aria-checked="true" checked="checked"{% else %} aria-checked="false" {% endif %}>
                                        <label class="nhsuk-label nhsuk-radios__label" for="18">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="19" name="a-9" type="radio" value="no" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="19">
                                            No
                                        </label>
                                    </div>

                                </div>

                            </div>

                        </fieldset>

                    </div>

                </div>

                <!-- hide this question in automation -->

                <div class="qa-questions-group {% if data.idv[data.prototype.count].media_video === '' %}js-hidden" data-complete="true"{% else %}" data-complete="true"{% endif %}>
                    <div class="qa-questions-question" id="selfie-3" {% if data.idv[data.prototype.count].media_video === '' %}data-answered="true"{% else %}data-answered="false"{% endif %} data-group="decline-8">

                        <fieldset class="nhsuk-fieldset nhsuk-u-margin-top-6">

                                <legend class="nhsuk-fieldset__legend">
                                    <p class="qa-questions-question-text">
                                        Can you clearly see or hear {{data.idv[data.prototype.count].challenge }}?
                                    </p>
                                </legend>

                            <div class="qa-questions-answer-group multiple-choice__container" {% if data.idv[data.prototype.count].media_video === '' %} data-answered="true"{% else %} data-answered="false" {% endif %}>

                                <div class="nhsuk-radios nhsuk-radios--inline">

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="20" name="a-10" type="radio" value="yes" {% if data.idv[data.prototype.count].media_video === '' %}aria-checked="true" checked="checked"{% else %} aria-checked="false" {% endif %}>
                                        <label class="nhsuk-label nhsuk-radios__label" for="20">
                                            Yes
                                        </label>
                                    </div>

                                    <div class="nhsuk-radios__item nhsuk-u-margin-bottom-3">
                                        <input class="nhsuk-radios__input qa-questions-answer" id="21" name="a-10" type="radio" value="no" aria-checked="false">
                                        <label class="nhsuk-label nhsuk-radios__label" for="21">
                                            No
                                        </label>
                                    </div>

                                </div>

                            </div>

                        </fieldset>

                    </div> 
                </div>

                <div id="id-buttons"> 
                    <div id="id-approve">
                        <a href="dashboard" data-target="modal" id="approveBtn" class="nhsuk-button button---approve button--modal nhsuk-u-margin-top-3" style="display: none;">Continue to approve
                        </a>  
                    </div>
                    <div id="id-decline">
                        <a href="dashboard" data-target="modal" id="declineBtn" class="nhsuk-button button--decline button--modal nhsuk-u-margin-top-3" style="display: none;">Decline</a>
                    </div>
                    <div id="id-move">
                        <a href="dashboard" data-target="modal" id="idmoveBtn" class="nhsuk-button nhsuk-button--secondary button--modal nhsuk-u-margin-top-3" style="display: none;">Move to holding list</a>
                    </div>
                    <div id="safeguarding-move">
                        <a href="dashboard" data-target="modal" id="safeguardingmoveBtn" class="nhsuk-button nhsuk-button--secondary button--modal nhsuk-u-margin-top-3" style="display: none;">Move to holding list</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

<div id="slideout" data-status="closed">
    <a href="dashboard" data-target="modal" id="slideout__button" class="button--modal">
        <img src="/images/problem.png" alt="Feedback" height="173" width="32" />
    </a>
</div>



<!-- MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW 
    MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW 
    MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW MODAL WINDOW 
    --------------->


<div class="modal-overlay" id="modal_window" aria-hidden="true" role="dialog" aria-labelledby="modal_title">
    <div class="modal-content" id="modal_holder" role="document" >
        <label class="nhsuk-label" for="sort">
            <h3 id="modal-header"></h3>
        </label>


        <!-- APPROVE MODALLLLL 
        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
        ---------------->

        <div class="first-item" id="approve-modal" style="display:none">
            <form action="accept" method="POST" role="form">

                    <div class="nhsuk-form-group" >
                  
                        <fieldset class="nhsuk-fieldset" aria-describedby="example-hint">
                  
                            <div class="nhsuk-checkboxes">
                    
                                <div class="nhsuk-checkboxes__item">
                                    <input class="nhsuk-checkboxes__input" onclick="setTimeout(conFirm, 500);" id="confirm" name="example" type="checkbox" value="">
                                    <label class="nhsuk-label nhsuk-checkboxes__label" for="example-1">
                                        Yes, I confirm it has passed all checks 
                                    </label>
                                </div>
                            </div>
                        </fieldset>
                    </div> 

                    <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0" >
                        <button action="modal-link" method="POST" class="nhsuk-button full-width nhsuk-u-margin-bottom-3 button--approve-modal nhsuk-u-margin-top-0"  id="modal-link" style="transition-duration: 500ms; transition-timing-function: ease;  width:100%;" 
                            href="javascript{}:" onclick="document.getElementById('modal-link').submit(); return false;" disabled="disabled">Approve</button>
                    </div>
                    <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0" >
                        <p class="nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-3 nhsuk-u-margin-left-3" style="display:inline-block;"><a  href="#" onclick="closeModal()" class="cancel" id="modal_close">Cancel</a></p>
                    </div>
            </form>
        </div>

        <!-- DECLINE MODALLLLL 
        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
        ---------------->

        <div class="first-item" id="decline-modal" style="display:none"> 
            <form action="reject" method="POST" role="form">

                

                <div class="nhsuk-form-group">

                    <div id="modal-clarity" style="display:none;">

                        <div class="nhsuk-grid-row">
                            <div class="nhsuk-grid-column-two-thirds">
<!--                                <div class="idcheck-image" style="margin-top:0;">-->
<!--                                    <img src="/images/passport_redacted.jpg" class="idcheck-image-img" style="width: 100%;"-->
<!--                                         alt="Image of a passport"/>-->
<!--                                </div>-->

                                <div class="idcheck-image-container panzoom-parent">

                                    <div class="idcheck-image zoomable5">

                                        <img src="/images/media/photos/{{ data.idv[data.prototype.count].media_photoid_front}}" class="idcheck-image-img" style="width: 100%;"
                                             alt="Picture of an identity document"/>

                                    </div>

                                </div>
                            </div>

                            <div class="nhsuk-grid-column-one-third nhsuk-u-margin-top-0">

                                <div class="nhsuk-form-group">

                                    <fieldset class="nhsuk-fieldset">

                                        <div class="nhsuk-checkboxes nhsuk-checkboxes--small">

                                            <div class="nhsuk-checkboxes__item nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0 ">
                                                <input class="nhsuk-checkboxes__input" id="example-hint-1" name="example-hint" type="checkbox" value="blur">
                                                <label class="nhsuk-label nhsuk-checkboxes__label" for="example-hint-1">
                                                    It's too blurred
                                                </label>
                                            </div>

                                            <div class="nhsuk-checkboxes__item nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                                                <input class="nhsuk-checkboxes__input" id="example-hint-2" name="example-hint" type="checkbox" value="glare">
                                                <label class="nhsuk-label nhsuk-checkboxes__label" for="example-hint-2">
                                                    There's too much glare
                                                </label>
                                            </div>

                                            <div class="nhsuk-checkboxes__item nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0" id="idcheck-clarity-hologram" style="display:none;">
                                                <input class="nhsuk-checkboxes__input" id="example-hint-holo" name="example-hint" type="checkbox" value="glare">
                                                <label class="nhsuk-label nhsuk-checkboxes__label" for="example-hint-holo">
                                                    The hologram is hiding some information
                                                </label>
                                            </div>

                                            <div class="nhsuk-checkboxes__item nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                                                <input class="nhsuk-checkboxes__input" id="example-hint-3" name="example-hint" type="checkbox" value="light">
                                                <label class="nhsuk-label nhsuk-checkboxes__label" for="example-hint-3">
                                                    It's too light (overexposed)
                                                </label>
                                            </div>

                                            <div class="nhsuk-checkboxes__item nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                                                <input class="nhsuk-checkboxes__input" id="example-hint-4" name="example-hint" type="checkbox" value="dark">
                                                <label class="nhsuk-label nhsuk-checkboxes__label" for="example-hint-4">
                                                    It's too dark
                                                </label>
                                            </div>

                                            <div class="nhsuk-checkboxes__item nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                                                <input class="nhsuk-checkboxes__input" id="example-hint-5" name="example-hint" type="checkbox" value="cropped">
                                                <label class="nhsuk-label nhsuk-checkboxes__label" for="example-hint-5">
                                                    It's cropped (part of the document is not in the photo)
                                                </label>
                                            </div>

                                            <div class="nhsuk-checkboxes__item nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                                                <input class="nhsuk-checkboxes__input" id="example-hint-6" name="example-hint" type="checkbox" value="covered">
                                                <label class="nhsuk-label nhsuk-checkboxes__label" for="example-hint-6">
                                                    Something is covering some or all of the document
                                                </label>
                                            </div>

                                            <div class="nhsuk-checkboxes__item nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                                                <input class="nhsuk-checkboxes__input" id="example-hint-7" name="example-hint" type="checkbox" value="small">
                                                <label class="nhsuk-label nhsuk-checkboxes__label" for="example-hint-7">
                                                    It's too small
                                                </label>
                                            </div>

                                            <div class="nhsuk-checkboxes__item nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                                                <input class="nhsuk-checkboxes__input" id="example-hint-8" name="example-hint" type="checkbox" value="dirty">
                                                <label class="nhsuk-label nhsuk-checkboxes__label" for="example-hint-8">
                                                    It's too dirty
                                                </label>
                                            </div>

                                            <div class="nhsuk-checkboxes__item nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                                                <input class="nhsuk-checkboxes__input" id="example-hint-9" name="example-hint" type="checkbox" value="filtered">
                                                <label class="nhsuk-label nhsuk-checkboxes__label" for="example-hint-9">
                                                    A photo filter has been applied
                                                </label>
                                            </div>

                                            <div class="nhsuk-checkboxes__item nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                                                <input class="nhsuk-checkboxes__input" id="example-hint-10" name="example-hint" type="checkbox" value="other" data-question="decline-text-16">
                                                <label class="nhsuk-label nhsuk-checkboxes__label" for="example-hint-10">
                                                    Other
                                                </label>
                                            </div>

                                        </div>
                                    </fieldset>

                                </div>

                            </div>
                        </div>
                    </div>



                    <div id="rejection-reasons">

                        <select id="decline-0" class="nhsuk-select decline-group" id="sort" name="sort" style="margin-top:16px;width:100%;display:none;">
                            <option value="IDC-010" data-question="">--- Please select ---</option>

                            <option value="IDC-011" data-question="decline-text-2a">No record found</option>
                            <option value="IDC-012" data-question="decline-text-2b">Duplicate live records found</option>
                            <option value="IDC-013" data-question="decline-text-2b">Confusion record</option>
                            <option value="IDC-014" data-question="decline-text-2a">PDS issue with record</option>
                            <option value="IDC-015" data-question="decline-text-2a">Date of birth does not match</option>
                            <option value="IDC-016" data-question="decline-text-2a">Postcodes do not match</option>


                        </select>


                        <select id="decline-1" class="nhsuk-select decline-group" id="sort" name="sort" style="margin-top:16px;width:100%;display:none;">
                            <option value="IDC-023" data-question="">--- Please select ---</option>
                            {# <option value="IDC-024" data-question="none">User has not sent any ID at all</option> #}
                            {# <option value="IDC-025" data-question="none">It is not a type of ID we accept</option> #}
                            <option value="IDC-026" data-question="decline-text-1">Driving licence - cannot see everything clearly</option>
                            <option value="IDC-027" data-question="decline-text-1">Passport - cannot see everything clearly</option>
                            <option value="IDC-028" data-question="decline-text-1">National identity card - cannot see everything clearly</option>
                        </select>

                        <select id="decline-2" class="nhsuk-select decline-group" id="sort" name="sort" style="margin-top:16px;width:100%;display:none;">
                            <option value="IDC-030" data-question="">--- Please select ---</option>
                            <option value="IDC-031" data-question="decline-text-4a">Potential Fraud - ID Document</option>
                        </select>

                        <select id="decline-3" class="nhsuk-select decline-group" id="sort" name="sort" style="margin-top:16px;width:100%;display:none;">
                            <option value="IDC-040" data-question="">--- Please select ---</option>
                            <option value="IDC-041" data-question="decline-text-6a">Driving licence - expired</option>
                            <option value="IDC-042" data-question="decline-text-6a">Passport - expired</option>
                            <option value="IDC-043" data-question="decline-text-6a">National identity card - expired</option>
                            <option value="IDC-044" data-question="decline-text-6b">Unsupported UK document</option>
                            <option value="IDC-046" data-question="decline-text-6b">Unsupported non-UK document</option>
                        </select>

                        <select id="decline-4a" class="nhsuk-select decline-group" id="sort" name="sort" style="margin-top:16px;width:100%;display:none;">
                            <option value="IDC-050" data-question="">--- Please select ---</option>
                            <option value="IDC-051" data-question="decline-text-15a">Driving licence - dates of birth do not match</option>
                            <option value="IDC-051" data-question="decline-text-15a">Passport - dates of birth do not match</option>
                            <option value="IDC-051" data-question="decline-text-15a">National identity card - dates of birth do not match</option>                            
                        </select>

                        <select id="decline-4b" class="nhsuk-select decline-group" id="sort" name="sort" style="margin-top:16px;width:100%;display:none;">
                            <option value="IDC-050" data-question="">--- Please select ---</option>
                            <option value="IDC-051" data-question="decline-text-15b">Driving licence - first names do not match</option>
                            <option value="IDC-051" data-question="decline-text-15b">Passport - first names do not match</option>
                            <option value="IDC-051" data-question="decline-text-15b">National identity card - first names do not match</option>
                        </select>

                        <select id="decline-4c" class="nhsuk-select decline-group" id="sort" name="sort" style="margin-top:16px;width:100%;display:none;">
                            <option value="IDC-050" data-question="">--- Please select ---</option>
                            <option value="IDC-051" data-question="decline-text-15c">Driving licence - last names do not match</option>
                            <option value="IDC-054" data-question="decline-text-15c">Passport - last names do not match</option>
                            <option value="IDC-057" data-question="decline-text-15c">National identity card - last names do not match</option>

                        </select>

                        <select id="decline-5" class="nhsuk-select decline-group" id="sort" name="sort" style="margin-top:16px;width:100%;display:none;">
                            <option value="IDC-070" data-question="">--- Please select ---</option>
                            <option value="IDC-071" data-question="decline-text-8a">safeguarding 1</option>
                            <option value="IDC-072" data-question="decline-text-8b">safeguarding 2</option>
                            <option value="IDC-073" data-question="decline-text-8c">safeguarding 3</option>
                            <option value="IDC-074" data-question="decline-text-8c">safeguarding 4</option>
                        </select>

                        <select id="decline-6" class="nhsuk-select decline-group" id="sort" name="sort" style="margin-top:16px;width:100%;display:none;">
                            <option value="IDC-080" data-question="">--- Please select ---</option>
                            <option value="IDC-081" data-question="decline-text-8a">There is a face, but it's not clear</option>
                            <option value="IDC-082" data-question="decline-text-8b">There is no face in the video</option>
                            <option value="IDC-083" data-question="decline-text-8c">Nobody is in the video</option>
                        </select>

                        <select id="decline-7" class="nhsuk-select decline-group" id="sort" name="sort" style="margin-top:16px;width:100%;display:none;">
                            <option value="IDC-090" data-question="">--- Please select ---</option>
                            <option value="IDC-091" data-question="decline-text-10">Driving licence - face in the photo ID does not match face in video</option>
                            <option value="IDC-091" data-question="decline-text-10">Passport - face in the photo ID does not match face in video</option>
                            <option value="IDC-091" data-question="decline-text-10">National identity card - face in the photo ID does not match face in video</option>

                        </select>

                        <select id="decline-8" class="nhsuk-select decline-group" id="sort" name="sort" style="margin-top:16px;width:100%;display:none;">
                            <option value="IDC-100" data-question="">--- Please select ---</option>
                            <option value="IDC-101" data-question="decline-text-11a">There is no sound at all</option>
                            <option value="IDC-102" data-question="decline-text-11">Cannot see or hear numbers clearly</option> {# this one needs updating - it doesn't mention see in live #}
                            <option value="IDC-103" data-question="decline-text-12">Missing first or last number</option>
                            <option value="IDC-104" data-question="decline-text-13">Numbers are completely wrong</option> {# this one needs updating - it doesn't say completely in live#}
                            <option value="IDC-105" data-question="decline-text-14">Says something other than numbers</option>
                            <option value="IDC-105" data-question="decline-text-14a">Someone else is saying the numbers</option>

                        </select>
                    </div>
                </div>


                <div class="nhsuk-form-group" id="rejection-text" style="display:none;">

                    <div id="decline-text-1" style="display:none;">
                        <label class="nhsuk-label" for="field3">Which part of the ID is affected, and how? (required)</label>
                            <span class="nhsuk-hint">Tell us if:<br>
                            <ul>
                            <li>anything is covered up, and how</li>
                            <li>anything is cut off</li>
                            <li>there is glare</li>
                            <li>there is blur</li>
                            <li>it's too light</li>
                            <li>it's too dark</li>
                            <li>anything else is making it difficult for you to see the information clearly</li>
                            </ul>
                            </span>
                    </div>
                    <div id="decline-text-2a" style="display:none;">
                        <label class="nhsuk-label" for="field3">Explain why you made this decision (optional)</label>
                    </div>

                    <div id="decline-text-2b" style="display:none;">
                        <label class="nhsuk-label" for="field3">Explain why you made this decision, ensuring you include the ticket number. (required)</label>
                    </div>

                    <div id="decline-text-3" style="display:none;">
                        <label class="nhsuk-label" for="field3">"Which dates do not match? (required)</label>
                            <span class="nhsuk-hint">Look at the date of birth:<br>
                                &#9679; in the submitted details<br>
                                &#9679; in PDS<br>
                                &#9679; in the photo ID<br>
                            </span>
                    </div>

                    <div id="decline-text-4a" style="display:none;">
                        <label class="nhsuk-label" for="field3">Provide a reason for rejecting, including an incident number (required)</label>
                    </div>

                    <div id="decline-text-6a" style="display:none;">
                        <label class="nhsuk-label" for="field3"></label>
                    </div>

                    <div id="decline-text-6b" style="display:none;">
                        <label class="nhsuk-label" for="field3">What kind of ID is it? (required)</label>
                    </div>

                    <div id="decline-text-7" style="display:none;">
                        <label class="nhsuk-label" for="field3">Which details do not match, and why? (required)</label>
                    </div>

                    <div id="decline-text-8" style="display:none;">
                        <label class="nhsuk-label" for="field3">Why not? (required)</label>
                        <span class="nhsuk-hint">Tell us if:<br>
                            &#9679; anything is covered up, and how<br>
                            &#9679; anything is cut off<br>
                            &#9679; there is glare<br>
                            &#9679; there is blur<br>
                            &#9679; it's too light<br>
                            &#9679; it's too dark<br>
                            &#9679; anything else is making it difficult for you to see the information clearly<br>
                        </span>
                    </div>
                    
                    <div id="decline-text-8a" style="display:none;">
                        <label class="nhsuk-label" for="field3">Why not? (required)</label>
                        <span class="nhsuk-hint">Tell us if:<br>
                            &#9679; anything is covered up, and how<br>
                            &#9679; anything is cut off<br>
                            &#9679; there is glare<br>
                            &#9679; there is blur<br>
                            &#9679; it's too light<br>
                            &#9679; it's too dark<br>
                            &#9679; anything else is making it difficult for you to see the information clearly<br>
                        </span>
                    </div>

                    <div id="decline-text-8b" style="display:none;">
                        <label class="nhsuk-label" for="field3">What can you see? (required)</label>
                    </div>

                    <div id="decline-text-8c" style="display:none;">
                        <label class="nhsuk-label" for="field3">Explain why you made this decision (required)</label>
                    </div>


                    <div id="decline-text-9" style="display:none;">
                        <label class="nhsuk-label" for="field3">Explain how the face is covered</label>
                    </div>

                    <div id="decline-text-10" style="display:none;">
                        <label class="nhsuk-label" for="field3">More information about why you think they do not match (optional)</label>
                    </div>

                    <div id="decline-text-11a" style="display:none;">
                        <label class="nhsuk-label" for="field3"></label>
                    </div>

                    <div id="decline-text-11" style="display:none;">
                        <label class="nhsuk-label" for="field3">Why can't you see or hear the numbers clearly? (required)</label> {# this one needs updating - it doesn't mention see in live #}
                    </div>

                    <div id="decline-text-12" style="display:none;">
                        <label class="nhsuk-label" for="field3">Which numbers do they miss? (required)</label>
                    </div>

                    <div id="decline-text-13" style="display:none;">
                        <label class="nhsuk-label" for="field3">More information about why they were wrong (optional)</label>
                    </div>

                    <div id="decline-text-14" style="display:none;">
                        <label class="nhsuk-label" for="field3">What do they say? (required)</label>
                    </div>

                    <div id="decline-text-14a" style="display:none;">
                        <label class="nhsuk-label" for="field3">Explain why you made this decision (optional)</label>
                    </div>

                    <div id="decline-text-15" style="display:none;">
                        <label class="nhsuk-label" for="field3" style="display:none;"></label>
                    </div>

                    <div id="decline-text-15a" style="display:none;">
                        <label class="nhsuk-label" for="field3"></label>
                    </div>

                    <div id="decline-text-15b" style="display:none;">
                        <label class="nhsuk-label" for="field3">Explain why you made this decision (optional)</label>
                    </div>

                    <div id="decline-text-15c" style="display:none;">
                        <label class="nhsuk-label" for="field3">Explain why you made this decision (optional)</label>
                    </div>

                    <div id="decline-text-16" style="display:none;">
                        <label class="nhsuk-label" for="field3" style="display:block;">What is the 'other' reason?</label>
                    </div>

                    <textarea class="nhsuk-textarea" id="field3" name="field3" type="text" rows="3"
                              style="margin-top: 16px;" onkeyup='checkText(this.value);'></textarea>
                </div>

                <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                    <button class="nhsuk-button full-width nhsuk-u-margin-bottom-3 nhsuk-u-margin-top-0" id="modal-link-decline" style="width:100%;"
                       href="supervisor-dashboard" disabled="disabled">Submit</button>
                </div>
                <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                    <p class="nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-3 nhsuk-u-margin-left-3" style="display:inline-block;"><a href="#" onclick="closeModal()" id="modal_close2">Cancel</a></p>
                </div>
            </form> 
        </div>

        <!-- MOVE TO HOLD QUEUE MODALLLLL 
        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
        ---------------->
        <div class="first-item" id="moveHold-modal" style="display:none"> 
            
            <form action="holding" method="POST" role="form">
                <div class="nhsuk-form-group">

                    <h4 class="nhs-heading-xs nhsuk-u-padding-top-2">Select reason for moving this record to holding list</h4>

                    <div id="rejection-reasons">

                        <select class="nhsuk-select" id="move-hold" name="move-hold" style="margin-top:16px;width:100%;">
                            <option>--- Please select ---</option>

                            <option>Name Discrepancy</option>
                            <option>Potential Confusion - Addresses</option>
                            <option>Potential Confusion - Names</option>
                            <option>Potential Duplicate</option>
                            <option>Unsupported Postcode</option>
                            <option>Document Issue</option>
                            <option>Potential Fraud - ID Document</option>
                            <option>Potential Fraud - Likeness/Liveness</option>
                            <option>Potential Safeguarding</option>
                            <option>System Issue</option>
                            <option>Automation Issue</option>
                            <option>Other</option>

                        </select>

                    </div>
                </div>

                <div class="nhsuk-form-group" id="move-reason-optional" style="display:none;">
                    <label>Any additional information? (optional)</label>
                    <textarea class="nhsuk-textarea" id="move-textbox" name="move-textbox" type="text"style="margin-top: 16px;" onkeyup='checkMoveHoldText(this.value);'></textarea>
                </div>

                <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                        <button class="nhsuk-button full-width nhsuk-u-margin-bottom-3 nhsuk-u-margin-top-0" id="id-holding" style="width:100%;"
                            disabled="disabled">Move to hold list
                        </button> 
                </div>
                
                <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                    <p class="nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-3 nhsuk-u-margin-left-3" style="display:inline-block;"><a href="#" onclick="closeModal()" id="modal_close3">Cancel</a></p>
                </div>
            </form> 
        </div>

                <!-- ID NOT GENUINE MOVE TO HOLD QUEUE MODALLLLL 
        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
        ---------------->
        <div class="first-item" id="id-not-genuine-modal" style="display:none"> 
            
            <form action="holding" method="POST" role="form">
                <div class="nhsuk-form-group">

                    <h4 class="nhs-heading-xs nhsuk-u-padding-top-2">Select reason for moving this record to holding list</h4>

                    <div id="rejection-reasons">
                        <select class="nhsuk-select" id="potential-fraud" name="potential-fraud" style="margin-top:16px;width:100%;">
                            <option>--- Please select ---</option>
                            <option>Potential Fraud - ID Document</option>
                        </select>
                    </div>

                </div>

                <div class="nhsuk-form-group" id="potential-fraud-optional" style="display:none;">
                    <label class="nhsuk-body-m">Any additional information? (optional)</label>
                    <textarea class="nhsuk-textarea" id="move-textbox" name="move-textbox" type="text"style="margin-top: 16px;"></textarea>
                </div>

                <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                    <button class="nhsuk-button full-width nhsuk-u-margin-bottom-3 nhsuk-u-margin-top-0" id="potential-fraud-holding" style="width:100%;"
                        disabled="disabled">Move to hold list
                    </button> 
                </div>
                
                <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                    <p class="nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-3 nhsuk-u-margin-left-3" style="display:inline-block;"><a href="#" onclick="closeModal()" id="modal_close4">Cancel</a></p>
                </div>
            </form> 
        </div>

                        <!-- SAFEGUARDING MOVE TO HOLD QUEUE MODALLLLL 
        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
        ---------------->
        <div class="first-item" id="safeguarding-modal" style="display:none"> 
            
            <form action="holding" method="POST" role="form">
                <div class="nhsuk-form-group">

                    <h4 class="nhs-heading-xs nhsuk-u-padding-top-2">Select reason for moving this record to holding list</h4>

                    <div id="rejection-reasons">
                        <select class="nhsuk-select" id="potential-safeguarding" name="potential-safeguarding" style="margin-top:16px;width:100%;">
                            <option>--- Please select ---</option>
                            <option>Potential Safeguarding</option>
                        </select>
                    </div>

                </div>

                <div class="nhsuk-form-group" id="potential-safeguarding-optional" style="display:none;">
                    <label class="nhsuk-body-m">Any additional information? (optional)</label>
                    <textarea class="nhsuk-textarea" id="move-textbox" name="move-textbox" type="text"style="margin-top: 16px;"></textarea>
                </div>

                <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                    <button class="nhsuk-button full-width nhsuk-u-margin-bottom-3 nhsuk-u-margin-top-0" id="potential-safeguarding-holding" style="width:100%;"
                        disabled="disabled">Move to hold list
                    </button> 
                </div>
                
                <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0">
                    <p class="nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-3 nhsuk-u-margin-left-3" style="display:inline-block;"><a href="#" onclick="closeModal()" id="modal_close4">Cancel</a></p>
                </div>
            </form> 
        </div>

    </div> <!-- end .modal-content -->
</div> <!-- end .modal-overlay --> 



<p class="u-visuallyhidden" style="visibility: hidden;"><a id="modal_create" class="smartcard" href="#">.</a><a id="holding" href="dashboard">.</a></p>

</div>


<script type="text/javascript">
    /* eslint-disable indent */

    // hide or show the buttons based on selections
    // localStorage.removeItem("idchecker")
    addEventListeners()
    addButtonListeners()
    addClarityButtonListeners()
    addRejectionListeners()
    resetAllSections()
    addRetraceListener()
    addOtherListener()
    addSlideoutListener()
    questionsComplete = false

////////////////////////////



////////////////////////////////////////////////

    // Change the trancoded button on click
{#             function change()
        {
            var elem = document.getElementById("transcodelink");
            if (elem.innerHTML=="Show the original video") elem.innerHTML = "Show the transcoded video";
            else elem.innerHTML = "Show the original video";
        } #}

{# var btn = document.getElementById("transcodelink");
btn.value = 'my value'; // will just add a hidden value
btn.innerHTML = 'my text'; #}


    function getParameterByName(name, url) {
        if (!url) url = window.location.href
        name = name.replace(/[\[\]]/g, "\\$&")
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url)
        if (!results) return null
        if (!results[2]) return ''
        return decodeURIComponent(results[2].replace(/\+/g, " "))
    }

    var state = getParameterByName('state')

    setTimeout(function () {
        document.getElementById('trace').style.display = 'block'
        if (state === 'noresult') {
            $('label[for="1"]').click()
        }
    }, 2000)
    setTimeout(function () {
        document.getElementById('loader').style.display = 'none'
    }, 2000)

    setTimeout(function () {
        document.getElementById('declinebtn-2').style.display = 'block'
        var errors = document.getElementsByClassName('idcheck-edit')
        for (i = 0; i < errors.length; i++) {
            errors[i].style.display = 'inline-block'
        }
        if (state === 'noresult') {
            $('label[for="1"]').click()
        }
    }, 2000)

    setTimeout(function () {
        document.getElementById('slideout-value_tab_spinner').style.display = 'none'
    }, 4000)

    setTimeout(function () {
        document.getElementById('slideout-value_tab_value').style.display = 'block'
    }, 4000)

    // when any radio button is clicked
    var processClick = function (e) {
        // update local storage straight away
        updateStorageFromElements()

        // first unset all the aria-checked attributes in an answer group
        var labels = e.parentNode.getElementsByClassName('qa-questions-answer')

        for (i = 0; i < labels.length; i++) {
            labels[i].setAttribute('aria-checked', false)
        }
        // then check only the selected one
        e.setAttribute('aria-checked', true)

        // a click will trigger the showing and hiding of question groups

        // get the section the click was in and pass it into a function
        var section = e.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        checkSectionComplete(section)
    }

    // when an approve or decline button is clicked
    var buttonClick = function (object, event) {
        event.preventDefault()

        var target = object.parentElement.parentElement.getAttribute('data-group')

        var link = object.href
        var heading = document.getElementById('modal-header')

        var content = document.getElementById('modal_holder')
        content.classList.remove('modal-content--clarity')

        document.getElementById('modal-clarity').style.display = 'none'

        heading.innerText = 'Information about this declined verification'
        var a = document.getElementById('modal-link')
        a.href = link
        document.getElementById('modal_create').click()

        var buttonType = object.id

        if (object.id === 'declineBtn') {
            heading.classList.remove('nhsuk-heading-l');
            document.getElementById('decline-modal').style.display = 'block'
            document.getElementById('approve-modal').style.display = 'none'
            document.getElementById('moveHold-modal').style.display = 'none'
            document.getElementById('id-not-genuine-modal').style.display = 'none'
            document.getElementById('safeguarding-modal').style.display = 'none'
            console.log(target)
            if (target === 'decline-6') {
                heading.innerText = 'Select the reason for rejection'
            } else if (target === 'decline-0') {
                heading.innerText = 'Select the reason for rejection'
            } else if (target === 'decline-8') {
                heading.innerText = 'Select the reason for rejection'
            } else {
                heading.innerText = 'Select the reason for rejection'
            }
            setSubReasons('')
            setReasons(target)

        } else if (object.id === 'approveBtn') {
            heading.innerText = 'Do you confirm the record has passed all checks?';
            heading.classList.remove('nhsuk-heading-l');
            document.getElementById('approve-modal').style.display = 'block';
            document.getElementById('decline-modal').style.display = 'none';
            document.getElementById('moveHold-modal').style.display = 'none'
            document.getElementById('id-not-genuine-modal').style.display = 'none'
            document.getElementById('safeguarding-modal').style.display = 'none'

        } else if (object.id === 'slideout__button') {
            heading.innerText = 'Move to holding list';
            heading.classList.add('nhsuk-heading-l');
            document.getElementById('moveHold-modal').style.display = 'block'
            document.getElementById('approve-modal').style.display = 'none'
            document.getElementById('decline-modal').style.display = 'none';
            document.getElementById('id-not-genuine-modal').style.display = 'none'
            document.getElementById('safeguarding-modal').style.display = 'none'
            console.log(target)
                
            document.getElementById('modal_create').click()

        } else if (object.id === 'idmoveBtn') {
            heading.innerText = 'Move to holding list';
            heading.classList.add('nhsuk-heading-l');
            document.getElementById('id-not-genuine-modal').style.display = 'block'
            document.getElementById('safeguarding-modal').style.display = 'none'
            document.getElementById('approve-modal').style.display = 'none'
            document.getElementById('decline-modal').style.display = 'none';
            document.getElementById('moveHold-modal').style.display = 'none'
            console.log(target)
                
            document.getElementById('modal_create').click()

        } else if (object.id === 'safeguardingmoveBtn') {
            heading.innerText = 'Move to holding list';
            heading.classList.add('nhsuk-heading-l');
            document.getElementById('id-not-genuine-modal').style.display = 'none'
            document.getElementById('safeguarding-modal').style.display = 'block'
            document.getElementById('approve-modal').style.display = 'none'
            document.getElementById('decline-modal').style.display = 'none';
            document.getElementById('moveHold-modal').style.display = 'none'
            console.log(target)
                
            document.getElementById('modal_create').click()

        }
        
    }

  
    // when a don't know button is clicked
    var clarityClick = function (object, event) {
        event.preventDefault()

        var link = object.href
        var heading = document.getElementById('modal-header')

        var clarityQuestion = object.parentNode.getAttribute('id')

        console.log(clarityQuestion)

        if (clarityQuestion === 'id-canttell2') {
            heading.innerText = 'Select all the reasons you cannot answer this question'
        } else if (clarityQuestion === 'id-canttell3') {
            heading.innerText = 'Select the reason you cannot confirm whether it\'s a valid document (select all that apply)'
          document.getElementById('idcheck-clarity-hologram').style.display = 'block'
        } else if (clarityQuestion === 'selfie-2') {
            heading.innerText = 'Information about this declined verification (Faces do not match)'
        }

        var content = document.getElementById('modal_holder')
        content.classList.add('modal-content--clarity')

        document.getElementById('modal-link').removeAttribute('disabled')

        document.getElementById('modal-clarity').style.display = 'block'

        var rejections = document.getElementById('rejection-reasons')
        rejections.style.display = 'none'

        var a = document.getElementById('modal-link')
        a.href = link
        document.getElementById('modal_create').click()

        var buttonType = object.text
    }

    function setReasons(target) {
        // first do a reset
        console.log("set reasons")
        // get all the dropdowns into an array;
        document.getElementById('rejection-reasons').style.display = 'block'
        var reasons = document.getElementsByClassName('decline-group')
        for (i = 0; i < reasons.length; i++) {
            reasons[i].style.display = 'none'
            reasons[i].selectedIndex = "0";
        }
        if (target){
            document.getElementById(target).style.display = 'block'
        }
    }

    var selectChange = function (object, event) {
        var target = object.options[object.selectedIndex].getAttribute('data-question')
        setSubReasons(target)
    }

    function setSubReasons(target) {


        // reset everything before showing the picked one
        var subReasons = document.getElementById('rejection-text').getElementsByTagName('div')
        resetText()
        for (i = 0; i < subReasons.length; i++) {
            subReasons[i].style.display = 'none'
        }
        if (target){

          console.log(target)

            if (target === "decline-text-15" || target === "none" ) {
                document.getElementById('modal-link').removeAttribute("disabled")
              document.getElementById('rejection-text').style.display = 'none'
            } else {
                document.getElementById('rejection-text').style.display = 'block'

                if (target === "decline-text-16") {
                    console.log('hello')
                }
            }

            document.getElementById(target).style.display = 'block'
            // show the text area
            // document.getElementById('rejection-text').style.display = 'block'
        } else {
            document.getElementById('rejection-text').style.display = 'none'
        }
    }

    function checkText(text) {
        if(text.length >= 1) {
            document.getElementById('modal-link-decline').removeAttribute("disabled")
        } else if(text.length == 0) {
            document.getElementById('modal-link-decline').setAttribute("disabled", '')
        }
    }

    function checkMoveHoldText(text) {
        if(text.length >= 1) {
            document.getElementById('id-holding').removeAttribute("disabled")
        } else if(text.length == 0) {
            document.getElementById('id-holding').setAttribute("disabled", '')
        }
    }

    function conFirm() {
        if((document.getElementById('confirm').checked)) {
            document.getElementById('modal-link').removeAttribute("disabled")
        } else {
            document.getElementById('modal-link').setAttribute("disabled", '')
        }
    }

    // move to hold CTA button enable/ disable
    var selectElement = document.getElementById("move-hold");

    // Select the submit button by its ID
    var submitButton = document.getElementById("id-holding");

    // Add change event listener to the <select> element
    selectElement.addEventListener("change", function() {
        // Check the selected option
        if (selectElement.value === "Other") {
            // Show the textarea for "Other"
            document.getElementById("move-reason-required").style.display = "block";
            // Hide the optional textarea
            document.getElementById("move-reason-optional").style.display = "none";
            // Disable the submit button
            submitButton.setAttribute("disabled", "disabled");
        } else if (selectElement.value === "--- Please select ---") {
            // Hide all the textarea
            document.getElementById("move-reason-required").style.display = "none";
            document.getElementById("move-reason-optional").style.display = "none";
            // Disable the submit button
            submitButton.setAttribute("disabled", "disabled");    
        } else {
            // Hide the textarea for "Other"
            document.getElementById("move-reason-required").style.display = "none";
            // Show the optional textarea
            document.getElementById("move-reason-optional").style.display = "block";
            // Enable the submit button
            submitButton.removeAttribute("disabled");
        }
    });


    // ID not genuine question - move to hold modal function
    // move to hold CTA button enable/ disable
    var selectElement = document.getElementById("potential-fraud");

    // Select the submit button by its ID
    var submitButton = document.getElementById("potential-fraud-holding");

    // Add change event listener to the <select> element
    selectElement.addEventListener("change", function() {
    // Check the selected option
    if (selectElement.value === "--- Please select ---") {
        // Hide all the textarea
        document.getElementById("potential-fraud-optional").style.display = "none";
        // Disable the submit button
        submitButton.setAttribute("disabled", "disabled");    
    } else {
        // Show the optional textarea
        document.getElementById("potential-fraud-optional").style.display = "block";
        // Enable the submit button
        submitButton.removeAttribute("disabled");
    }
});


    var selectElement2 = document.getElementById("potential-safeguarding");

    var submitButton2 = document.getElementById("potential-safeguarding-holding");

    // Add change event listener to the <select> element
     selectElement2.addEventListener("change", function() {
    // Check the selected option
    if (selectElement2.value === "--- Please select ---") {
        // Hide all the textarea
        document.getElementById("potential-safeguarding-optional").style.display = "none";
        // Disable the submit button
        submitButton2.setAttribute("disabled", "disabled");    
    } else {
        // Show the optional textarea
        document.getElementById("potential-safeguarding-optional").style.display = "block";
        // Enable the submit button
        submitButton2.removeAttribute("disabled");
    }
});


  // Close modal on clicking overlay and reset checkbox
  var closeoverlay = document.getElementById('modal_window');
  var overlay = document.getElementById('modal_holder');

    overlay.addEventListener("click", function(e) {
    e.stopPropagation();
    });

    closeoverlay.addEventListener("click", function(e) {
        closeOverlay( e );
    });

    function closeOverlay() {
        document.getElementById('modal_window').setAttribute('aria-hidden', 'true')
        document.getElementById('modal_window').setAttribute('tabindex', '-1')
        let inputs = document.getElementById('confirm');
        inputs.checked = false;
        document.getElementById('modal-link').setAttribute("disabled", '')
        event.preventDefault()
        modalOpen = false
        lastFocus.focus()
    }

// Close modal and reset checkbox on clicking cancel 
    function closeModal() {
        document.getElementById('modal_window').setAttribute('aria-hidden', 'true')
        document.getElementById('modal_window').setAttribute('tabindex', '-1')
        let inputs = document.getElementById('confirm');
        inputs.checked = false;
        document.getElementById('modal-link').setAttribute("disabled", '')
        event.preventDefault()
        modalOpen = false
        lastFocus.focus()
    }  


    function resetText() {
        var textarea = document.getElementById('field3')
        textarea.value = ''
        document.getElementById('modal-link-decline').setAttribute("disabled", '')
    }

    function retrace() {
        document.getElementById('trace').style.display = 'none'
        document.getElementById('declinebtn-2').style.display = 'none'
        document.getElementById('loader').style.display = 'block'
        setTimeout(function () {
            document.getElementById('retrace').style.display = 'block'
            document.getElementById('pds-retrace-result').style.display = 'block'
        }, 2000)
        setTimeout(function () {
            document.getElementById('loader').style.display = 'none'
            document.getElementById('pds-result').style.display = 'none'
        }, 2000)
    }

    // run through all sections checking for completeness
    function resetAllSections() {
        // get an array of all the question groups
        var questionGroups = document.getElementsByClassName('qa-questions-group')
        // lets hold the completion state of each section in an array
        for (i = 0; i < questionGroups.length; i++) {
            // reset attributes
            questionGroups[i].setAttribute('data-complete', false)
            // get array of all the answer groups
            var questions = questionGroups[i].getElementsByClassName('qa-questions-question')
            // loop through all the question groups
            for (j = 0; j < questions.length; j++) {
                // get array of the labels
                var answers = questionGroups[i].getElementsByClassName('qa-questions-answer')
                // loop through answers
                for (k = 0; k < answers.length; k++) {
                    answers[k].setAttribute('aria-checked', false)
                    // get the individual inputs
                    var inputs = answers[k].getElementsByTagName('input')
                    // loop through all the inputs and uncheck them
                    for (l = 0; l < answers.length; l++) {
                      // answers[l].checked = false
                      answers[l].disabled = true
                    }
                }
            }
        }
        unlockFirstQuestion()
    }



    function addEventListeners() {
        var inputs = document.getElementsByTagName('input')
        for (i = 0; i < inputs.length; i++) {
            inputs[i].addEventListener('click', function () {
                processClick(this)
            })
        }
    }

    function addButtonListeners() {
        var inputs = document.querySelectorAll('.button--modal')
        for (i = 0; i < inputs.length; i++) {
            inputs[i].addEventListener('click', function (event) {
                buttonClick(this, event)
            })
        }
    }


    function addClarityButtonListeners() {
        var inputs = document.querySelectorAll('.button--decline--clarity')
        for (i = 0; i < inputs.length; i++) {
            inputs[i].addEventListener('click', function (event) {
                clarityClick(this, event)
            })
        }
    }

    function addRejectionListeners() {
        var selects = document.querySelectorAll('.decline-group')
        for (i = 0; i < selects.length; i++) {
            selects[i].addEventListener('change', function (event) {
                selectChange(this, event)
            })
        }
    }

    function addOtherListener() {
        if (document.getElementById('example-hint-10')) {
            var selects = document.getElementById('example-hint-10')
            selects.addEventListener('change', function () {
                if(this.checked) {
                    // selectChange(this, event)
                    var target = this.getAttribute('data-question')
                    setSubReasons(target)
                } else {
                    var target = this.getAttribute('data-question')
                    setSubReasons(target)
                }
            })
        }
    }

    function addRetraceListener() {
        if (document.getElementById('retraceBtn')) {
            var selects = document.getElementById('retraceBtn')
            selects.addEventListener('click', function (event) {
                retrace(this, event)
            })
        }
    }

    function addSlideoutListener() {
    var slideoutButton = document.getElementById('slideout__button');
    if (slideoutButton) {
        slideoutButton.addEventListener('click', function(event) {
            buttonClick(this, event);
        });
    }
    }

    function updateStorageFromElements() {
        var idCheck = []
        var inputs = document.getElementsByTagName('input')
        for (i = 0; i < inputs.length; i++) {
            var inputId = inputs[i].getAttribute('id')
            idCheck[inputId] = inputs[i].checked
        }
        localStorage.setItem('idchecker', JSON.stringify(idCheck))
    }

    function checkSectionComplete(section) {
        // get an array of all the question subgroups
        var questions = section.getElementsByClassName('qa-questions-question')
        var sectionComplete = true
        for (i = 0; i < questions.length; i++) {
            var inputs = questions[i].getElementsByTagName('input')
            var questionComplete = false
            for (j = 0; j < inputs.length; j++) {
                if (inputs[j].checked) {
                    questionComplete = true
                }
            }
            if (false === questionComplete) {
                sectionComplete = false
            }
        }
        if (sectionComplete) {
            section.setAttribute('data-complete', true)
            unlockNextSection(section)
            return true
        }
    }

    function unlockNextSection(section) {
        var id = section.getElementsByClassName('qa-questions-question')[0].getAttribute('id')
        var sections = []
        var groups = document.getElementsByClassName('qa-questions-group')
        for (i = 0; i < groups.length; i++) {
            sections[i] = groups[i].getElementsByClassName('qa-questions-question')[0].getAttribute('id')
        }
        // work out what the next section is
        var currentSectionPosition = sections.indexOf(id)
        var nextSectionPosition = currentSectionPosition + 1
        var lastSection = sections[groups.length-1]

       console.log("unlock " + nextSectionPosition)
        // console.log(lastSection)

        if (currentSectionPosition < groups.length-1 ){
            var nextSection = sections[nextSectionPosition]
            // get the next section object
            nextSection = document.getElementById(nextSection)

            // enable radio buttons
            var nextRadios = nextSection.getElementsByTagName('input')

            // enable next clarity link
          if (document.getElementById(sections[nextSectionPosition]).parentNode.getElementsByClassName('button--decline--clarity')[0]) {
            console.log("clarity question exists in next section")
            document.getElementById(sections[nextSectionPosition]).parentNode.getElementsByClassName('button--decline--clarity')[0].classList.remove('disabled')
          }

            for (j = 0; j < nextRadios.length; j++) {
                nextRadios[j].disabled = false
            }
        }
        updateSolutions()
    }

    function updateSolutions() {
    // Retrieve the answer array from local storage and parse it from JSON format
    var idCheck = JSON.parse(localStorage['idchecker']);

    // Check if the value at index 11 of the idCheck array is true
    if (idCheck[11] === true) {
        // Show the element with id 'manual-pds-1'
        document.getElementById('manual-pds-1').style.display = 'block';
        // Enable the radio buttons with ids 'radio-inline-3' and 'radio-inline-4'
        document.getElementById('radio-inline-3').disabled = false;
        document.getElementById('radio-inline-4').disabled = false;
    } else if (idCheck[10] === true) {
        // If the value at index 10 is true, hide the element with id 'manual-pds-1'
        document.getElementById('manual-pds-1').style.display = 'none';
    }

    // Check if the value at index 13 of the idCheck array is true
    if (idCheck[13] === true) {
        // Show the element with id 'manual-pds-2'
        document.getElementById('manual-pds-2').style.display = 'block';
        // Enable the radio buttons with ids 'radio-inline-5' and 'radio-inline-6'
        document.getElementById('radio-inline-5').disabled = false;
        document.getElementById('radio-inline-6').disabled = false;
    } else if (idCheck[12] === true) {
        // If the value at index 12 is true, hide the element with id 'manual-pds-2'
        document.getElementById('manual-pds-2').style.display = 'none';
    }

    // Check if any of the following indices in the idCheck array are true
    if (idCheck[1] === true || idCheck[3] === true || idCheck[5] === true || idCheck[9] === true || idCheck[15] === true || idCheck[17] === true || idCheck[19] === true || idCheck[22] === true) {
        console.log('something is off');

        // Check if the element with id 'radio-inline-3' is not checked
        if (document.getElementById('radio-inline-3').checked !== true) {
            // Hide the buttons with ids 'approveBtn' and 'idmoveBtn', and show the 'declineBtn'
            document.getElementById('approveBtn').style.display = 'none';
            document.getElementById('idmoveBtn').style.display = 'none';
            document.getElementById('safeguardingmoveBtn').style.display = 'none';
            document.getElementById('declineBtn').style.display = 'inline-block';

            // Determine which document the 'declineButton' should be moved after based on the idCheck array values
            var declineButton = document.getElementById('id-decline');
            var approveButton = document.getElementById('id-approve');
            var idmoveButton = document.getElementById('idmoveBtn');
            var safeguardingmoveButton = document.getElementById('safeguardingmoveBtn');
            

            // Check if the record is opened from holding list or main queue uing URL parameter

                var urlParams = new URLSearchParams(window.location.search);
                var queueParam = urlParams.get('queue');

            // Place the visible button after the correct fieldset and hide or show appropriate button
            if (idCheck[1] === true) {
                document.getElementById('document-1').getElementsByClassName("nhsuk-fieldset")[0].after(declineButton);
                idmoveButton.style.display = 'none';
                safeguardingmoveButton.style.display = 'none';
                approveButton.style.display = 'none';
                declineButton.style.display = 'inline-block';
            } else if (idCheck[3] === true) {
                if (queueParam === 'holding') {
                document.getElementById('document-2').getElementsByClassName("nhsuk-fieldset")[0].after(declineButton);
                idmoveButton.style.display = 'none';
                safeguardingmoveButton.style.display = 'none';
                approveButton.style.display = 'none';
                declineButton.style.display = 'inline-block';
                } else {
                document.getElementById('document-2').getElementsByClassName("nhsuk-fieldset")[0].after(idmoveButton);
                idmoveButton.style.display = 'inline-block';
                safeguardingmoveButton.style.display = 'none';
                approveButton.style.display = 'none';
                declineButton.style.display = 'none';
                }
            } else if (idCheck[5] === true) {
                document.getElementById('document-3').getElementsByClassName("nhsuk-fieldset")[0].after(declineButton);
                idmoveButton.style.display = 'none';
                safeguardingmoveButton.style.display = 'none';
                approveButton.style.display = 'none';
                declineButton.style.display = 'inline-block';
            } else if (idCheck[7] === true) {
                document.getElementById('trace-1').getElementsByClassName("nhsuk-fieldset")[0].after(declineButton);
                idmoveButton.style.display = 'none';
                safeguardingmoveButton.style.display = 'none';
                approveButton.style.display = 'none';
                declineButton.style.display = 'inline-block';  
            } else if (idCheck[9] === true) {
                document.getElementById('pds-1').getElementsByClassName("nhsuk-fieldset")[0].after(declineButton);
                idmoveButton.style.display = 'none';
                safeguardingmoveButton.style.display = 'none';
                approveButton.style.display = 'none';
                declineButton.style.display = 'inline-block';
            } else if (idCheck[15] === true) {
                if (queueParam === 'holding') {
                document.getElementById('selfie-0').getElementsByClassName("nhsuk-fieldset")[0].after(declineButton);
                idmoveButton.style.display = 'none';
                safeguardingmoveButton.style.display = 'none';
                approveButton.style.display = 'none';
                declineButton.style.display = 'inline-block';
                } else {
                document.getElementById('selfie-0').getElementsByClassName("nhsuk-fieldset")[0].after(safeguardingmoveButton);
                idmoveButton.style.display = 'none';
                safeguardingmoveButton.style.display = 'inline-block';
                approveButton.style.display = 'none';
                declineButton.style.display = 'none';
                }
            } else if (idCheck[17] === true) {
                document.getElementById('selfie-1').getElementsByClassName("nhsuk-fieldset")[0].after(declineButton);
                idmoveButton.style.display = 'none';
                approveButton.style.display = 'none';
                declineButton.style.display = 'inline-block';
            } else if (idCheck[19] === true) {
                document.getElementById('selfie-2').getElementsByClassName("nhsuk-fieldset")[0].after(declineButton);
                idmoveButton.style.display = 'none';
                approveButton.style.display = 'none';
                declineButton.style.display = 'inline-block';
            } else if (idCheck[21] === true) {
                document.getElementById('selfie-3').getElementsByClassName("nhsuk-fieldset")[0].after(declineButton);
                idmoveButton.style.display = 'none';
                approveButton.style.display = 'none';
                declineButton.style.display = 'inline-block';
            } else {
                document.getElementById('id-buttons').getElementsByClassName("nhsuk-fieldset")[0].after(declineButton);
                idmoveButton.style.display = 'none';
                approveButton.style.display = 'none';
                declineButton.style.display = 'none';
            }
        }
    } 

    // Check if all specified indices in the idCheck array are true
    else if (idCheck[0] === true && idCheck[2] === true && idCheck[4] === true && idCheck[8] === true && idCheck[10] === true && idCheck[12] === true && idCheck[14] === true && idCheck[16] === true && idCheck[18] === true) {
        console.log('yay all yes');
        // Show the 'approveBtn' and hide the 'declineBtn' and 'idmoveBtn'
        document.getElementById('approveBtn').style.display = 'inline-block';
        document.getElementById('declineBtn').style.display = 'none';
        document.getElementById('idmoveBtn').style.display = 'none';
        document.getElementById('safeguardingmoveBtn').style.display = 'none';
    }

    // Check if a specific set of conditions are met for 'radio-inline-3' and 'radio-inline-4'
    else if (idCheck[0] === true && idCheck[2] === true && idCheck[4] === true && idCheck[8] === true && idCheck['radio-inline-3'] === true && idCheck['radio-inline-4'] === true && idCheck[14] === true && idCheck[16] === true && idCheck[19] === true) {
        console.log('yay all yesses');
        // Show the 'approveBtn' and hide the 'declineBtn' and 'idmoveBtn'
        document.getElementById('approveBtn').style.display = 'inline-block';
        document.getElementById('declineBtn').style.display = 'none';
        document.getElementById('idmoveBtn').style.display = 'none';
        document.getElementById('safeguardingmoveBtn').style.display = 'none';
    }

    // If none of the above conditions are met
    else {
        // Hide all buttons
        document.getElementById('approveBtn').style.display = 'none';
        document.getElementById('declineBtn').style.display = 'none';
        document.getElementById('idmoveBtn').style.display = 'none';
        document.getElementById('safeguardingmoveBtn').style.display = 'none';
    }
}

function openMoveToHoldModal() {
    document.getElementById('moveHold-modal').style.display = 'block';
}

    function unlockFirstQuestion() {
        // console.log("unlock")

        // get an array of all the question groups
        var questionGroup1 = document.getElementById('document-1')
        var questionGroup2 = document.getElementById('document-2')
        var questionGroup3 = document.getElementById('document-3')
        //
        var inputs = questionGroup1.getElementsByTagName('input')
        // // loop through all the inputs and uncheck them
        for (l = 0; l < inputs.length; l++) {
            inputs[l].checked = false
            inputs[l].disabled = false
        }

        // check to see if document check has passed
        // If yes, then disable all the radios for the doc check section and select the

        if ({{ data.idv[data.prototype.count].doc_check_passes }}) {

            var inputs1 = questionGroup1.getElementsByTagName('input')
            var inputs2 = questionGroup2.getElementsByTagName('input')
            var inputs3 = questionGroup3.getElementsByTagName('input')
            for (m = 0; m < inputs1.length; m++) {
                inputs1[0].checked = false;
                // inputs1[m].disabled = true;
                inputs2[0].checked = false;
                inputs2[m].disabled = true;
                inputs3[0].checked = false;
                inputs3[m].disabled = true;
            }

            if ({{ data.idv[data.prototype.count].pds_matches }} === 'true') {
                console.log("unlock date of birth question")
                var questionGroup4 = document.getElementById('pds-1')
                var inputs4 = questionGroup4.getElementsByTagName('input')
                // // loop through all the inputs and uncheck them
                for (n = 0; n < inputs4.length; n++) {
                    inputs4[n].checked = false
                    inputs4[n].disabled = false
                }
            }else {
                console.log("unlock: can you find record question")
                var questionGroup5 = document.getElementById('trace-1')
                var inputs5 = questionGroup5.getElementsByTagName('input')
                // // loop through all the inputs and uncheck them
                for (n = 0; n < inputs5.length; n++) {
                    inputs5[n].checked = false
                    inputs5[n].disabled = false
                }
            }
        }
        // updateSolutions()
    }


</script>


<script>
    const photo1 = document.querySelector('.zoomable1')
    const photo2 = document.querySelector('.zoomable2')
    const photo3 = document.querySelector('.zoomable3')
    const photo4 = document.querySelector('.zoomable4')
    const photo5 = document.querySelector('.zoomable5')

    let area1 = panzoom(photo1, {
        smoothScroll: false,
        bounds: true,
        boundsPadding: 0.75,
        minZoom: 1,
        maxZoom: 5,
        beforeWheel: function(e) {
            // allow wheel-zoom only if altKey is down. Otherwise - ignore
            var shouldIgnore = !e.altKey
            return shouldIgnore
        }
    })

    // NEED IF STATEMENT HERE IF BACK IMAGE EXISTS

    // let area2 = panzoom(photo2, {
    //     smoothScroll: false,
    //     beforeWheel: function(e) {
    //         // allow wheel-zoom only if altKey is down. Otherwise - ignore
    //         var shouldIgnore = !e.altKey
    //         return shouldIgnore
    //     }
    // })
    let area3 = panzoom(photo3, {
        smoothScroll: false,
        beforeWheel: function(e) {
            // allow wheel-zoom only if altKey is down. Otherwise - ignore
            var shouldIgnore = !e.altKey
            return shouldIgnore
        },
        bounds: true,
        boundsPadding: 0.75,
        minZoom: 1,
        maxZoom: 5
    })
    let area4 = panzoom(photo4, {
        smoothScroll: false,
        beforeWheel: function(e) {
            // allow wheel-zoom only if altKey is down. Otherwise - ignore
            var shouldIgnore = !e.altKey
            return shouldIgnore
        },
        bounds: true,
        boundsPadding: 0.75,
        minZoom: 1,
        maxZoom: 5,
        transformOrigin: {x: 0.5, y: 0.5}
    })
    let area5 = panzoom(photo5, {
        smoothScroll: false,
        bounds: true,
        boundsPadding: 0.75,
        beforeWheel: function(e) {
            // allow wheel-zoom only if altKey is down. Otherwise - ignore
            var shouldIgnore = !e.altKey
            return shouldIgnore
        },
        minZoom: 1,
        maxZoom: 5
    })

    var reset = document.getElementById('reset')
    reset.addEventListener('click', function (event) {
        console.log('clicked')
        area1.zoomTo(1, 1, 0)
        area1.moveTo(0, 0)

        // document.getElementsByClassName('zoomable1')[0].style.transform = 'matrix(1, 0, 0, 1, 0, 0)'
        console.log(document.getElementsByClassName('zoomable1')[0])
    })


</script>
{% endblock %}


